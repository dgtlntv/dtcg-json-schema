{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://dgtln.tv/schemas/2025.10/format/format.json",
    "title": "DTCG Format Schema",
    "description": "JSON Schema for the Design Tokens Community Group (DTCG) Format specification. The root of a design tokens file is a group.",
    "allOf": [
        {
            "$ref": "https://dgtln.tv/schemas/2025.10/format/group.json#/definitions/groupProperties"
        },
        {
            "type": "object",
            "properties": {
                "$schema": {
                    "type": "string",
                    "format": "uri",
                    "description": "URI reference to this JSON schema.",
                    "$comment": "$schema is not part of the official DTCG specification."
                }
            }
        }
    ],
    "additionalProperties": false,
    "definitions": {
        "tokenOrGroupName": {
            "title": "Token or Group Name",
            "type": "string",
            "pattern": "^[^${}.][^{}.]*$",
            "description": "Valid token/group names: must not start with $ and must not contain {, }, or ."
        },
        "curlyBraceReference": {
            "title": "Curly Brace Reference",
            "type": "string",
            "pattern": "^\\{[^${}.][^{}.]*(\\.[^${}.][^{}.]*)*\\}$",
            "description": "Curly brace reference (e.g., '{tokenName}' or '{group.nested.token}')"
        },
        "jsonPointerReference": {
            "title": "JSON Pointer Reference",
            "type": "string",
            "format": "json-pointer-uri-fragment",
            "description": "JSON Pointer reference (RFC 6901) to a location in the document (e.g., '#/path/to/target')"
        },
        "jsonPointerReferenceObject": {
            "title": "JSON Pointer Reference Object",
            "type": "object",
            "properties": {
                "$ref": {
                    "$ref": "#/definitions/jsonPointerReference"
                }
            },
            "required": ["$ref"],
            "additionalProperties": false,
            "description": "Object containing a JSON Pointer reference for property-level references"
        },
        "tokenValueReference": {
            "title": "Token Value Reference",
            "anyOf": [
                {
                    "$ref": "#/definitions/curlyBraceReference"
                },
                {
                    "$ref": "#/definitions/jsonPointerReferenceObject"
                }
            ],
            "description": "A reference to a token value using either curly brace syntax or JSON Pointer syntax"
        }
    }
}
